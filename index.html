<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>筋トレ管理アプリ</title>
<link rel="stylesheet" href="https://kato0914.github.io/houkoku/style.css"/>
</head>
<body>

<div class="container">
  <h2>筋トレ管理アプリ</h2>
  <form id="workoutForm">
    <label for="date">日付:</label><br>
    <input type="date" id="today" required><br><br>

<script type="text/javascript">
  window.onload = function () {
    var today = new Date();
    today.setDate(today.getDate());
    var yyyy = today.getFullYear();
    var mm = ("0" + (today.getMonth() + 1)).slice(-2);
    var dd = ("0" + today.getDate()).slice(-2);
    document.getElementById("today").value = yyyy + '-' + mm + '-' + dd;
  }
</script>
    
    <label>筋トレの種類:</label><br>
    <div class="radio-container">
      <label>
        <input type="radio" name="type" value="ショルダープレス" required> ショルダープレス
      </label>
      <label>
        <input type="radio" name="type" value="チェストプレス" required> チェストプレス
      </label>
      <label>
        <input type="radio" name="type" value="ラットプルダウン" required> ラットプルダウン
      </label>
      <label>
        <input type="radio" name="type" value="レッグプレス" required> レッグプレス
      </label>
      <label>
        <input type="radio" name="type" value="アブベンチ" required> アブベンチ
      </label>
      <label>
        <input type="radio" name="type" value="トレッドミル" required> トレッドミル
      </label>
    </div><br><br>
    
    <label for="reps">回数:</label><br>
    <select id="reps" name="reps" required>
      <option value="" disabled selected>選択してください</option>
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="35">35</option>
      <option value="40">40</option>
      <option value="45">45</option>
      <option value="50">50</option>
    </select><br><br>
    
    <button type="submit">送信</button>
  </form>
  
  <div id="response"></div>
</div>

<script>
  document.getElementById('workoutForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    var date = document.getElementById('date').value;
    var type = document.querySelector('input[name="type"]:checked').value;
    var reps = document.getElementById('reps').value;
    
    var formData = new FormData();
    formData.append('date', date);
    formData.append('type', type);
    formData.append('reps', reps);
    
    fetch('https://script.google.com/macros/s/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/exec', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      if (data.result === "success") {
        document.getElementById('response').innerText = "データが正常に送信されました。";
      } else {
        document.getElementById('response').innerText = "エラーが発生しました: " + data.message;
      }
    })
    .catch(error => {
      document.getElementById('response').innerText = 'エラーが発生しました: ' + error.message;
    });
  });
</script>

</body>
</html>
